Расчет расстояния проводиться только при повторном нажатии кнопки. 

Такое ощущение, что, к моменту, когда отрабатывает вторая функция calculateCost(), calculatedDistance еще не посчитано.

upd: Добавил задержку для выполнения функции calculateCost(). Нужно поискать другое решение.
